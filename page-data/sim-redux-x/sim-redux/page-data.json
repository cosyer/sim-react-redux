{"componentChunkName":"component---src-templates-doc-template-index-tsx","path":"/sim-redux-x/sim-redux","result":{"pageContext":{"content":"<h1 id=\"如何实现一个简单版的-redux？\" style=\"position:relative;\"><a href=\"#%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%89%88%E7%9A%84-redux%EF%BC%9F\" aria-label=\"如何实现一个简单版的 redux？ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>如何实现一个简单版的 Redux？</h1>\n<blockquote>\n<p>此文是公司申报创新激励的最初版本, 可能有些文不对题, 大家凑活看吧.</p>\n</blockquote>\n<h3 id=\"目录\" style=\"position:relative;\"><a href=\"#%E7%9B%AE%E5%BD%95\" aria-label=\"目录 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>目录</h3>\n<div class=\"toc\">\n<ul>\n<li><a href=\"#%E7%9B%AE%E6%A0%87\">目标</a></li>\n<li><a href=\"#%E6%B5%81%E7%A8%8B\">流程</a></li>\n<li><a href=\"#%E5%8E%9F%E7%90%86\">原理</a></li>\n<li><a href=\"#%E8%A7%A3%E5%86%B3%E7%9A%84%E9%97%AE%E9%A2%98\">解决的问题</a></li>\n<li><a href=\"#%E6%8A%80%E6%9C%AF%E6%96%B9%E6%A1%88%E6%8F%8F%E8%BF%B0\">技术方案描述</a></li>\n</ul>\n</div>\n<h3 id=\"目标\" style=\"position:relative;\"><a href=\"#%E7%9B%AE%E6%A0%87\" aria-label=\"目标 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>目标</h3>\n<ul>\n<li class=\"task-list-item\"><input type=\"checkbox\" checked disabled> 流程</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" checked disabled> 原理</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" checked disabled> 解决的问题</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" checked disabled> 提炼为一个通用方法或框架（解决方案）</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" checked disabled> 描述技术方案（适当举例）</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" checked disabled> 详细的流程图</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" checked disabled> 文字描述技术方案</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" checked disabled> 明确技术效果并论证</li>\n</ul>\n<h3 id=\"流程\" style=\"position:relative;\"><a href=\"#%E6%B5%81%E7%A8%8B\" aria-label=\"流程 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>流程</h3>\n<h6 id=\"流程图\" style=\"position:relative;\"><a href=\"#%E6%B5%81%E7%A8%8B%E5%9B%BE\" aria-label=\"流程图 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>流程图</h6>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 325px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/40caea77585d7effb8090e652c1d14f0/ff46a/technological-process.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.282208588957054%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABZklEQVQoz6WSyU/CQBjF+f89kIAXSihQS0IPJA2EQ+FSTSXYsGljImrsIhLtaqmt0E5nHFrEAIlLfHmZJd/8vjeZTAb9Q5m9PYTr0XL90f3LpWxiTx7M20cTpoXv4Tg5NJbtI94vj2BBjI4vYPnciEH0AwxhEgCj0yst3w+bd6g5hfQ1yndVVZG3rQ/gOEYA4DkMw1dTl2SdODNORJfqO+W+2xDn86eZ67qfAWnIbvIKgJlhhLgLhCCKAEgcrY2rnucFQbCfjGu6JNnj8Q3HTbtdezLxHWf7emmIoijD4ZDn+cFggBeqqm7gN89zCwVULEKKQiQJstlnScJZ4WoVJloulyzLlkolhmFqtRpBEBzHbWDf8xYEgapVyLKo0YC5nCKK1mJhmWvZtq1pGsbq9Xqr1Wq32zRNdzqdDfweBHOGsUjSrFSwdZJ0FGV74XQUBIGiKCYRhnu93teDxbuGB/rVD/uTPgB7A5gNOwJFywAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image\"\n        title=\"image\"\n        src=\"/static/40caea77585d7effb8090e652c1d14f0/ff46a/technological-process.png\"\n        srcset=\"/static/40caea77585d7effb8090e652c1d14f0/222b7/technological-process.png 163w,\n/static/40caea77585d7effb8090e652c1d14f0/ff46a/technological-process.png 325w\"\n        sizes=\"(max-width: 325px) 100vw, 325px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h6 id=\"名词解释\" style=\"position:relative;\"><a href=\"#%E5%90%8D%E8%AF%8D%E8%A7%A3%E9%87%8A\" aria-label=\"名词解释 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>名词解释</h6>\n<ul>\n<li>View： 视图层</li>\n<li>Actor（行动者）：View委派更新操作，Actor是代理执行者</li>\n<li>Store（数据层）：用来存放应用的状态，一旦发生变动，就提醒 View 要更新页面</li>\n</ul>\n<h3 id=\"原理\" style=\"position:relative;\"><a href=\"#%E5%8E%9F%E7%90%86\" aria-label=\"原理 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>原理</h3>\n<h6 id=\"基础原理\" style=\"position:relative;\"><a href=\"#%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86\" aria-label=\"基础原理 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>基础原理</h6>\n<p>本质就是数据的\"单向流动\"，将视图（数据）更新的逻辑剥离出来，由Actor统一调度。</p>\n<h6 id=\"基础逻辑\" style=\"position:relative;\"><a href=\"#%E5%9F%BA%E7%A1%80%E9%80%BB%E8%BE%91\" aria-label=\"基础逻辑 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>基础逻辑</h6>\n<ol>\n<li>用户访问 View</li>\n<li>View 将交互操作委派给 Actor</li>\n<li>Actor 接收到委派，要求 Store 进行相应的更新</li>\n<li>Store 更新后，发出一个\"change\"事件</li>\n<li>View 收到\"change\"事件后，更新页面</li>\n</ol>\n<h3 id=\"解决的问题\" style=\"position:relative;\"><a href=\"#%E8%A7%A3%E5%86%B3%E7%9A%84%E9%97%AE%E9%A2%98\" aria-label=\"解决的问题 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>解决的问题</h3>\n<h6 id=\"技术背景\" style=\"position:relative;\"><a href=\"#%E6%8A%80%E6%9C%AF%E8%83%8C%E6%99%AF\" aria-label=\"技术背景 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>技术背景</h6>\n<p>前端的技术迭代的速度飞快，当下mvvm大行其道，这些框架一定程度上封装了之前纷繁复杂的dom操作，而且也降低了使用门槛。在应付小规模应用的时候，有约束的数据流向和传输也许并没有什么副作用，但是项目规模扩大之后，一级一级的状态/属性传输却显得特别的臃肿和低效。</p>\n<h6 id=\"本方案的优势\" style=\"position:relative;\"><a href=\"#%E6%9C%AC%E6%96%B9%E6%A1%88%E7%9A%84%E4%BC%98%E5%8A%BF\" aria-label=\"本方案的优势 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>本方案的优势</h6>\n<p>本方案的数据总是\"单向流动\"，任何相邻的部分都不会发生数据的\"双向流动\"。这保证了流程的清晰。所有的状态变化都拘束到 Actor(s) 中进行，修改统一的数据源，然后再自上而下的重新分发，减少状态/属性传递的成本，也从根源上杜绝了状态震荡，而且本方案将数据从react中分离，则理论上所有的组件都可以是无状态组件，那么渲染性能还能够得到进一步的提升。</p>\n<h3 id=\"技术方案描述\" style=\"position:relative;\"><a href=\"#%E6%8A%80%E6%9C%AF%E6%96%B9%E6%A1%88%E6%8F%8F%E8%BF%B0\" aria-label=\"技术方案描述 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>技术方案描述</h3>\n<h6 id=\"详细的方案流程图\" style=\"position:relative;\"><a href=\"#%E8%AF%A6%E7%BB%86%E7%9A%84%E6%96%B9%E6%A1%88%E6%B5%81%E7%A8%8B%E5%9B%BE\" aria-label=\"详细的方案流程图 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>详细的方案流程图</h6>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 601px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0637c2de2fe9b3f6abff3486f9846816/d8f62/uml.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 94.47852760736197%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACCElEQVQ4y4XUCW5qMQwFUPa/LlaAxCAxl3mmhQ6MqU4kP6Wtvn6kEJLY1/fazqulX+N2u6XL5ZKu12v6+PhIb29v6XQ65dU8n8957954Pp8//GsOgNzv9/T+/p5eXl7ScDhMq9UqTSaT9Pr6mp2Px2Pa7/fp6+srgwIPwHLWAG2327Tb7VKz2Uz9fj87Y2FwXiwWablc5vNut5sD8ysZVoDBEDPOnEajUV7DcDqdptlsltmxezwef8AqyX7kTOTNZpMZ1uv11Ol0KiPspYBMahA4HA45HQJb7eHUgqoLkT8/P9N4PM5OhvwxjpwCZAOcvTu2CigVmaFDOSKNk//yxkEwUoMNMPmLigsQHQC4AnQB0BQJcOQKoD3mmJRD8cKuyqGImEQkTAaDQQYBvl6vU6vVSu12O7M3AgRgWfFaWaGgT16j0cggUQRSsYs0hN9/AefzeQZVBFIVBSvn7uVWg5eSfwAG/Ug8B22CEQOtFM8s7OIF2QOMjqgAOejDXq+XmxojRoBjz1ifKUzY2kfgH4Aoi0SmGU9LIIw4Rt60ikBejldDkS5hV1U5pKimGRLLAQwbwQIACXl1FrKrpxevgbxIellNDtiYQGJg/EcyhlqCsSJEtBjuBSmr+88qlyyAamhMfRPJ1+QYRUsJGK8JGGXl16f2WxoDSY+3aWoRzlZTYPbR5OUn7BvUwLrU1A0ufAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image\"\n        title=\"image\"\n        src=\"/static/0637c2de2fe9b3f6abff3486f9846816/d8f62/uml.png\"\n        srcset=\"/static/0637c2de2fe9b3f6abff3486f9846816/222b7/uml.png 163w,\n/static/0637c2de2fe9b3f6abff3486f9846816/ff46a/uml.png 325w,\n/static/0637c2de2fe9b3f6abff3486f9846816/d8f62/uml.png 601w\"\n        sizes=\"(max-width: 601px) 100vw, 601px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h6 id=\"方案描述\" style=\"position:relative;\"><a href=\"#%E6%96%B9%E6%A1%88%E6%8F%8F%E8%BF%B0\" aria-label=\"方案描述 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>方案描述</h6>\n<ol>\n<li>用户访问 View，发生交互行为，View委派Actor发起更新。</li>\n<li>Actor 首先经过中间件，接着判断更新操作是否异步。若为异步，直接推入异步任务队列，若为同步，则尝试合并操作然后推入异步队列。</li>\n<li>调度器在内部时钟到期或者队列到达上限后拉取队列任务，尝试合并后依次对 Store 进行更新。</li>\n<li>Store每次更新后向订阅者发布最新数据。</li>\n<li>View 接收到推送的数据后，尝试比较两次的数据是否一致，若发生改变则更新视图。</li>\n<li>至此单向数据流形成闭环。</li>\n</ol>\n<h6 id=\"竞品比较\" style=\"position:relative;\"><a href=\"#%E7%AB%9E%E5%93%81%E6%AF%94%E8%BE%83\" aria-label=\"竞品比较 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>竞品比较</h6>\n<ul>\n<li>相较于 redux / flux，都只有一个 dispath 函数，使用 Actions 区分不同的更新逻辑，本方案采用 视图委托 Actors 触发更新，流程简洁。</li>\n<li>redux / flux 过度分化功能模块，增加维护成本，提高开发门槛。</li>\n<li>redux / flux 本身不存在 diff 更新过程，不会尝试合并更新操作，这导致大量无效的 rerender，降低页面性能，增加调式难度</li>\n</ul>"}}}